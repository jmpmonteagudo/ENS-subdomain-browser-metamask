<html>
<head>
<!-- <script src="web3.js"></script> -->
<script src="web3.min.js"></script>
<script src="ensutils-testnet.browser.js"></script>
</head>
<body>
<h1>Test</h1>
<table border=1>
    <tr><td>connected</td><td id="connected">...</td>   </tr>
	<tr><td>createSubDomain</td><td><input type="text" name="subDomain" id="subDomain" value="subDomain"></td>   <td><button onclick="createSubDomain()">go</button></td></tr>
</table>

<script>
	window.addEventListener('load', function() {
		
		httpProviderAddress = "https://ropsten.infura.io/RSJlYSaMBn90senwYhnq";
		web3 = new Web3(new Web3.providers.HttpProvider(httpProviderAddress));
		
		document.getElementById("connected").innerHTML = web3.isConnected();
	});	
	
	
	function get() {
		contract.get(
			function(error, result) {
				if(!error) {
					document.getElementById("get").innerHTML = result;
					console.log(result);
				} else {
					console.error(error);
				}
			}
		);
	}		
	
	function createSubDomain() {
		var subDomain = document.getElementById("subDomain").value;
		//contract.set.sendTransaction(data, {from: web3.eth.accounts[0], gas:1000000});
		console.log('subDomain: ' + subDomain);
		newEnsName = subDomain + '.sproutsdao.test';
		console.log('newEnsName: ' + newEnsName);
		console.log('getAddr(newEnsName): ' + getAddr(newEnsName));
		
		//ens.setSubnodeOwner(namehash('sproutsdao.test'), web3.sha3('bar'), eth.accounts[0], {from: eth.accounts[0]});
		//ens.setResolver(namehash(newEnsName), publicResolver.address, {from: eth.accounts[0]});
		//publicResolver.setAddr(namehash(newEnsName), eth.accounts[2], {from: eth.accounts[0]});
		//getAddr(newEnsName)		
	}			
	
	
</script>

<script src="ensutils-testnet.js"></script>
</body>
</html>
